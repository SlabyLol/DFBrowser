<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>SneedyAI</title>
<script src="qrc:///qtwebchannel/qwebchannel.js"></script>
<style>
body { background:#0d0d0d;color:white;font-family:Arial;display:flex;flex-direction:column;height:100vh;margin:0;}
#chat { flex:1;padding:20px;overflow:auto;}
input { padding:15px;border:none;font-size:16px;width:100%;background:#111;color:white;}
.msg-user { color:#4cafef; margin-bottom:10px; }
.msg-ai { color:#ffffff; margin-bottom:20px; }
</style>
</head>
<body>
<div id="chat"></div>
<input id="input" placeholder="Ask SneedyAI and press Enter" disabled>
<script>
const chat = document.getElementById("chat");
const input = document.getElementById("input");
input.disabled = true;

let backend;
new QWebChannel(qt.webChannelTransport, channel => {
    backend = channel.objects.sneedy;
    input.disabled = false; // jetzt kann der Benutzer schreiben
});

input.addEventListener("keydown", async e => {
    if (e.key === "Enter") {
        const msg = input.value;
        input.value = "";
        chat.innerHTML += `<div class="msg-user">You: ${msg}</div>`;
        if (backend) {
            const reply = await backend.ask(msg);
            chat.innerHTML += `<div class="msg-ai">SneedyAI: ${reply}</div>`;
            chat.scrollTop = chat.scrollHeight;
        } else {
            chat.innerHTML += `<div class="msg-ai">Error: backend not loaded</div>`;
        }
    }
});
</script>
</body>
</html>
